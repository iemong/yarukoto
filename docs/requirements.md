# Yarukoto 要件定義

mac 用 Google Tasks クライアント **Yarukoto** の機能要件・非機能要件。

## 1. プロダクト概要

- プロダクト名: **Yarukoto**
- ターゲット: macOS (Apple Silicon) ユーザーで Google Tasks を日常的に使う人
- 目的:
  - ブラウザを開かずにネイティブアプリ感覚で Google Tasks を扱えるようにする
  - キーボード操作中心でサクサク「やること」を管理できる体験を提供する

## 2. 対象プラットフォーム

- OS: macOS
- アーキテクチャ: Apple Silicon (arm64)
- 配布形態: DMG

## 3. 機能要件（MVP）

### 3.1 認証

- [ ] Google アカウントでログインできる
- [ ] 認証フローはシステムブラウザ経由で実施
- [ ] 認可コードからアクセストークン / リフレッシュトークンを取得できる
- [ ] アプリ再起動時にトークンを利用して自動ログインできる
- [ ] ログアウト（トークン削除）機能

### 3.2 タスクリスト管理

- [ ] Google Tasks の「タスクリスト」の一覧を取得・表示できる
- [ ] 任意のタスクリストを選択して、その中のタスクを表示できる
- [ ] （将来）タスクリストの追加・名前変更・削除

### 3.3 タスク表示

- [ ] 選択中のタスクリストのタスク一覧を表示できる
- [ ] タスクの以下の情報を表示できる
  - タイトル
  - 完了状態
  - 期日（あれば）
  - メモ / 詳細（あれば）
- [ ] 完了済みタスクと未完了タスクを視覚的に区別できる
- [ ] （将来）並び順（期日順・手動順など）の切り替え

### 3.4 タスク操作

- [ ] 新規タスクを追加できる
- [ ] タスクを完了 / 未完了に切り替えできる
- [ ] タスクタイトルを編集できる
- [ ] （将来）期日 / メモの編集
- [ ] （将来）タスクの並び順変更（ドラッグ＆ドロップなど）

### 3.5 同期

- [ ] 操作結果が Google Tasks API に即時反映される
- [ ] 手動 Sync ボタンでリスト / タスクを再取得できる
- [ ] （将来）一定間隔での自動同期

## 4. UX / UI 要件

### 4.1 レイアウト

- [ ] 2 ペイン構成
  - 左: タスクリスト一覧
  - 右: タスク一覧 + タスク入力エリア
- [ ] 上部バーに以下を配置
  - ログイン状態表示（アカウント名やアイコン）
  - Sync ボタン

### 4.2 キーボード操作

- [ ] 新規タスク入力欄で Enter で追加
- [ ] `Cmd+R` で再読み込み
- [ ] （将来）グローバルショートカット（例: `Ctrl+Option+Space`）

### 4.3 テーマ

- [ ] ライト / ダークテーマ両対応（OS 設定連動 or アプリ側トグル）
- [ ] （将来）カスタムテーマ

## 5. 非機能要件

### 5.1 セキュリティ

- Google OAuth 推奨フロー（Authorization Code + PKCE）に従う
- Client Secret は Tauri (Rust) 側のみで保持し、フロントに露出させない
- トークンは AppDir 配下に保存し、将来的に Keychain 連携を検討

### 5.2 パフォーマンス

- 起動時間は体感ストレスのないレベル（数秒以内）
- タスク表示・操作は基本的に即時反映（ローディング UI で待ちを隠す）

### 5.3 保守性

- ビジネスロジックはカスタムフック / Rust モジュールに分離
- 直接 `invoke` をコンポーネント内にベタ書きしない

### 5.4 ログ / エラー処理

- ユーザーにはトースト等でエラー通知
- 開発中はコンソール / Rust 側ログを参照

## 6. 将来の拡張アイデア

- オフライン対応（ローカルキャッシュ + 後追い同期）
- タスクの絞り込み（今日 / 今週 / 重要など）
- タグ / ラベル的な分類
- 複数アカウント対応
- Web 版 / モバイル版
